digraph {  
  # `assume` block
  subgraph cluster_assume {
    label = "assume";
    fontname = "Courier";
    
    assume [shape=box, label=< assume(varinfo, <FONT COLOR="#3B6EA8">@varname</FONT>(x), Normal())>, fontname="Courier"];
    iflinked_assume [label=< <FONT COLOR="#3B6EA8">if</FONT> istrans(varinfo, varname) >, fontname="Courier"];
    without_linking_assume [shape=box, label="f = from_internal_transform(varinfo, varname, dist)", fontname="Courier"];
    with_linking_assume [shape=box, label="f = from_linked_internal_transform(varinfo, varname, dist)", fontname="Courier"];
    with_logabsdetjac [shape=box, label="x, logjac = with_logabsdet_jacobian(f, assume_internal(varinfo, varname, dist))", fontname="Courier"];
    return_assume [shape=box, label=< <FONT COLOR="#3B6EA8">return</FONT> x, logpdf(dist, x) - logjac, varinfo >, style=dashed, fontname="Courier"];

    assume -> iflinked_assume;
    iflinked_assume -> without_linking_assume [label=<  <FONT COLOR="#97365B">false</FONT>>, fontname="Courier"];
    iflinked_assume -> with_linking_assume [label=<  <FONT COLOR="#97365B">true</FONT>>, fontname="Courier"];
    without_linking_assume -> with_logabsdetjac;
    with_linking_assume -> with_logabsdetjac;
    with_logabsdetjac -> return_assume;
  }
}

